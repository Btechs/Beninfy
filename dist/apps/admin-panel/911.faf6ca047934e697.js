"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[911],{9411:(Se,b,a)=>{a.r(b),a.d(b,{ManagementServicesModule:()=>be});var d=a(9826),S=a(3266),U=a(4004),e=a(5e3),p=a(9808),q=a(1646),F=a(2553),Z=a(7336),M=a(4138),C=a(5540),x=a(7036),L=a(6571),I=a(1062);function D(n,o){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"a",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("routerLink","view/"+t.id),e.xp6(1),e.Oqu(e.lcZ(6,3,"profile.view"))}}function E(n,o){if(1&n&&(e.TgZ(0,"nz-tab",4),e.TgZ(1,"nz-table",5,6),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"tbody"),e.YNc(12,D,7,5,"tr",7),e.qZA(),e.qZA(),e.qZA()),2&n){const t=o.$implicit,r=e.MAs(2);e.Q6J("nzTitle",t.name),e.xp6(1),e.Q6J("nzFrontPagination",!1)("nzData",t.services),e.xp6(5),e.Oqu(e.lcZ(7,6,"profile.name")),e.xp6(3),e.Oqu(e.lcZ(10,8,"profile.actions")),e.xp6(3),e.Q6J("ngForOf",r.data)}}function B(n,o){if(1&n&&(e.TgZ(0,"button",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw(2).ngIf,r=e.oxw();let i;e.Q6J("routerLink","category/view/"+t[null!==(i=r.selectedCategory)&&void 0!==i?i:0].id),e.xp6(1),e.Oqu(e.lcZ(2,2,"services.editCategory"))}}function $(n,o){1&n&&(e.TgZ(0,"button",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.Q6J("routerLink","new"),e.xp6(1),e.Oqu(e.lcZ(2,2,"services.newService")))}function j(n,o){if(1&n&&(e.YNc(0,B,3,4,"button",9),e.TgZ(1,"button",10),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,$,3,4,"button",9)),2&n){const t=e.oxw().ngIf;e.Q6J("ngIf",t.length>0),e.xp6(2),e.Oqu(e.lcZ(3,3,"services.newCategory")),e.xp6(2),e.Q6J("ngIf",t.length>0)}}function K(n,o){1&n&&(e.TgZ(0,"div"),e.TgZ(1,"nz-result",12),e.ALo(2,"translate"),e.TgZ(3,"div",13),e.TgZ(4,"button",14),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.s9C("nzTitle",e.lcZ(2,2,"service.createFirstNotice")),e.xp6(4),e.Oqu(e.lcZ(6,4,"services.newCategory")))}function X(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"nz-card"),e.TgZ(1,"nz-tabset",1),e.NdJ("nzSelectedIndexChange",function(i){return e.CHM(t),e.oxw().selectedCategory=i}),e.YNc(2,E,13,10,"nz-tab",2),e.qZA(),e.YNc(3,j,5,5,"ng-template",null,3,e.W1O),e.YNc(5,K,7,6,"div",0),e.qZA()}if(2&n){const t=o.ngIf,r=e.MAs(4),i=e.oxw();e.xp6(1),e.Q6J("nzTabBarExtraContent",r)("nzSelectedIndex",i.selectedCategory),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(3),e.Q6J("ngIf",t.length<1)}}let W=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.tagColor=i,this.lastNameSearchValue=""}ngOnInit(){this.query=this.route.data.pipe((0,U.U)(t=>t.services))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(S.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-management-services-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["nzType","card",3,"nzTabBarExtraContent","nzSelectedIndex","nzSelectedIndexChange"],[3,"nzTitle",4,"ngFor","ngForOf"],["extraTemplate",""],[3,"nzTitle"],["nzBordered","",3,"nzFrontPagination","nzData"],["ajaxTable",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["nz-button","","style","margin-left: 8px;",3,"routerLink",4,"ngIf"],["nz-button","","routerLink","category/new/",2,"margin-left","8px"],["nz-button","",2,"margin-left","8px",3,"routerLink"],["nzStatus","info",3,"nzTitle"],["nz-result-extra",""],["nz-button","","nzType","primary","routerLink","category/new/"]],template:function(t,r){if(1&t&&(e.YNc(0,X,6,4,"nz-card",0),e.ALo(1,"async")),2&t){let i;e.Q6J("ngIf",null==(i=e.lcZ(1,1,r.query))||null==i.data?null:i.data.serviceCategories)}},directives:[p.O5,q.bd,F.xH,p.sg,F.xw,Z.N8,Z.Om,Z.$Z,Z.Uo,Z._C,Z.p0,d.yS,M.ix,C.dQ,x.w,d.rH,L.ml,L.ey],pipes:[p.Ov,I.X$],encapsulation:2}),n})();var _=a(655),l=a(3075),m=a(7157),ee=a(7768),te=a(8306),v=a(3905),w=a(1731),R=a(8900),g=a(3714),h=a(9095),J=a(8177),Q=a(4471),ne=a(8763),re=a(5820),T=a(4592),ie=a(3271),oe=a(6771),ae=a(9997);const le=["timeStartPicker"],se=["timeEndPicker"],ce=["timeMultiplyInput"],me=["distanceFromInput"],ue=["distanceToInput"],de=["distanceMultiplyInput"];function ge(n,o){if(1&n&&e._UZ(0,"nz-option",47),2&n){const t=o.$implicit;e.Q6J("nzValue",t.id)("nzLabel",t.name)}}function pe(n,o){if(1&n&&e._UZ(0,"nz-option",47),2&n){const t=o.$implicit;e.Q6J("nzValue",t)("nzLabel",t)}}function ze(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"nz-tag",48),e.NdJ("nzCheckedChange",function(i){const u=e.CHM(t).$implicit;return e.oxw(2).handleRegionCheckChange(i,u)}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit,r=e.oxw(2);e.Q6J("nzChecked",r.form.value.regions.indexOf(t.id)>-1),e.xp6(1),e.hij(" ",t.name," ")}}function fe(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"i",49),e.TgZ(2,"div",50),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzType",t.loadingUpload?"loading":"plus"),e.xp6(2),e.Oqu(e.lcZ(4,2,"profile.upload"))}}function Ze(n,o){if(1&n&&e._UZ(0,"img",51),2&n){const t=e.oxw(2);e.Q6J("src",t.root+t.avatarUrl,e.LSH)}}function ve(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",52),e.TgZ(1,"span",53),e.TgZ(2,"mark"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"ul",54),e.TgZ(5,"nz-list-item-action"),e.TgZ(6,"a",55),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeTimeRule(s)}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e._uU(9),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(3),e.hij("",t.multiply,"x"),e.xp6(4),e.Oqu(e.lcZ(8,4,"profile.delete")),e.xp6(2),e.AsE(" ",t.startTime," - ",t.endTime," ")}}function _e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",52),e.TgZ(1,"span",53),e.TgZ(2,"mark"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"ul",54),e.TgZ(5,"nz-list-item-action"),e.TgZ(6,"a",55),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeDistanceRule(s)}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e._uU(9),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(3),e.hij("",t.multiply,"x"),e.xp6(4),e.Oqu(e.lcZ(8,4,"profile.delete")),e.xp6(2),e.AsE(" ",t.distanceFrom," - ",t.distanceTo," ")}}const he=function(n){return{Authorization:n}};function Te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"nz-card"),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e._UZ(2,"input",2),e._UZ(3,"input",3),e.TgZ(4,"div",4),e.TgZ(5,"nz-form-item"),e.TgZ(6,"nz-form-label",5),e._uU(7,"Name"),e.qZA(),e.TgZ(8,"nz-form-control"),e._UZ(9,"input",6),e.qZA(),e.qZA(),e.TgZ(10,"nz-form-item"),e.TgZ(11,"nz-form-label",7),e._uU(12,"Category"),e.qZA(),e.TgZ(13,"nz-form-control"),e.TgZ(14,"nz-select",8),e.YNc(15,ge,1,2,"nz-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"nz-form-item"),e.TgZ(17,"nz-form-label",10),e._uU(18,"Base Fare"),e.qZA(),e.TgZ(19,"nz-form-control"),e._UZ(20,"nz-input-number",11),e.qZA(),e.qZA(),e.TgZ(21,"nz-form-item"),e.TgZ(22,"nz-form-label",12),e._uU(23,"Per Hundred Meters"),e.qZA(),e.TgZ(24,"nz-form-control"),e._UZ(25,"nz-input-number",13),e.qZA(),e.qZA(),e.TgZ(26,"nz-form-item"),e.TgZ(27,"nz-form-label",12),e._uU(28,"Per Minute Drive"),e.qZA(),e.TgZ(29,"nz-form-control"),e._UZ(30,"nz-input-number",14),e.qZA(),e.qZA(),e.TgZ(31,"nz-form-item"),e.TgZ(32,"nz-form-label",12),e._uU(33,"Prepay Percent"),e.qZA(),e.TgZ(34,"nz-form-control"),e._UZ(35,"nz-input-number",15),e.qZA(),e.qZA(),e.TgZ(36,"nz-form-item"),e.TgZ(37,"nz-form-label",12),e._uU(38,"Minimum Fee"),e.qZA(),e.TgZ(39,"nz-form-control"),e._UZ(40,"nz-input-number",16),e.qZA(),e.qZA(),e.TgZ(41,"nz-form-item"),e.TgZ(42,"nz-form-label",12),e._uU(43,"Maximum Distance"),e.qZA(),e.TgZ(44,"nz-form-control"),e._UZ(45,"nz-input-number",17),e.qZA(),e.qZA(),e.TgZ(46,"nz-form-item"),e.TgZ(47,"nz-form-label",12),e._uU(48,"Search Radius"),e.qZA(),e.TgZ(49,"nz-form-control"),e._UZ(50,"nz-input-number",18),e.qZA(),e.qZA(),e.TgZ(51,"nz-form-item"),e.TgZ(52,"nz-form-label",12),e._uU(53,"Payment Method"),e.qZA(),e.TgZ(54,"nz-form-control"),e.TgZ(55,"nz-select",19),e.YNc(56,pe,1,2,"nz-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"nz-form-item"),e.TgZ(58,"nz-form-label",20),e._uU(59,"Provider Share Percent"),e.qZA(),e.TgZ(60,"nz-form-control"),e._UZ(61,"nz-input-number",21),e.qZA(),e.qZA(),e.TgZ(62,"nz-form-item"),e.TgZ(63,"nz-form-label",22),e._uU(64,"Provider Share Flat"),e.qZA(),e.TgZ(65,"nz-form-control"),e._UZ(66,"nz-input-number",23),e.qZA(),e.qZA(),e.TgZ(67,"nz-form-item"),e.TgZ(68,"nz-form-label",24),e._uU(69,"Cancelation Total Fee"),e.qZA(),e.TgZ(70,"nz-form-control"),e._UZ(71,"nz-input-number",25),e.qZA(),e.qZA(),e.TgZ(72,"nz-form-item"),e.TgZ(73,"nz-form-label",26),e._uU(74,"Cancelation Driver Share"),e.qZA(),e.TgZ(75,"nz-form-control"),e._UZ(76,"nz-input-number",27),e.qZA(),e.qZA(),e.TgZ(77,"nz-form-item",28),e.TgZ(78,"nz-form-label",12),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"nz-form-control"),e.YNc(82,ze,2,2,"nz-tag",29),e.qZA(),e.qZA(),e.TgZ(83,"nz-form-item"),e.TgZ(84,"nz-form-label",12),e._uU(85,"Image"),e.qZA(),e.TgZ(86,"nz-form-control"),e.TgZ(87,"nz-upload",30),e.NdJ("nzChange",function(i){return e.CHM(t),e.oxw().handleUploadChange(i)}),e.YNc(88,fe,5,4,"ng-container",0),e.YNc(89,Ze,1,1,"img",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(90,"nz-card",32),e.TgZ(91,"ul",33),e.YNc(92,ve,10,6,"li",34),e.qZA(),e.TgZ(93,"div",35),e.TgZ(94,"nz-form-item"),e.TgZ(95,"nz-form-label"),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"nz-form-control"),e._UZ(99,"nz-time-picker",36,37),e.ALo(101,"translate"),e.qZA(),e.qZA(),e.TgZ(102,"nz-form-item"),e.TgZ(103,"nz-form-label"),e._uU(104),e.ALo(105,"translate"),e.qZA(),e.TgZ(106,"nz-form-control"),e._UZ(107,"nz-time-picker",36,38),e.ALo(109,"translate"),e.qZA(),e.qZA(),e.TgZ(110,"nz-form-item"),e.TgZ(111,"nz-form-label"),e._uU(112),e.ALo(113,"translate"),e.qZA(),e.TgZ(114,"nz-form-control"),e._UZ(115,"nz-input-number",39,40),e.ALo(117,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(118,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().insertTimeRule()}),e._uU(119),e.ALo(120,"translate"),e.qZA(),e.qZA(),e.TgZ(121,"nz-card",42),e.TgZ(122,"ul",33),e.YNc(123,_e,10,6,"li",34),e.qZA(),e.TgZ(124,"div",35),e.TgZ(125,"nz-form-item"),e.TgZ(126,"nz-form-label"),e._uU(127),e.ALo(128,"translate"),e.qZA(),e.TgZ(129,"nz-form-control"),e._UZ(130,"nz-input-number",39,43),e.ALo(132,"translate"),e.qZA(),e.qZA(),e.TgZ(133,"nz-form-item"),e.TgZ(134,"nz-form-label"),e._uU(135),e.ALo(136,"translate"),e.qZA(),e.TgZ(137,"nz-form-control"),e._UZ(138,"nz-input-number",39,44),e.ALo(140,"translate"),e.qZA(),e.qZA(),e.TgZ(141,"nz-form-item"),e.TgZ(142,"nz-form-label"),e._uU(143),e.ALo(144,"translate"),e.qZA(),e.TgZ(145,"nz-form-control"),e._UZ(146,"nz-input-number",39,45),e.ALo(148,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(149,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().insertDistanceRule()}),e._uU(150),e.ALo(151,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(152,"button",46),e._uU(153),e.ALo(154,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=o.ngIf,r=e.oxw();e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(14),e.Q6J("ngForOf",t.serviceCategories),e.xp6(20),e.Q6J("nzFormatter",r.formatterPercent)("nzParser",r.parserPercent)("nzMax",100)("nzMin",0),e.xp6(10),e.Q6J("nzFormatter",r.formatterMeters)("nzParser",r.parserMeters),e.xp6(5),e.Q6J("nzFormatter",r.formatterMeters)("nzParser",r.parserMeters),e.xp6(6),e.Q6J("ngForOf",r.paymentMethods),e.xp6(5),e.Q6J("nzFormatter",r.formatterPercent)("nzParser",r.parserPercent)("nzMax",100)("nzMin",0),e.xp6(18),e.hij(" ",e.lcZ(80,43,"service.Regions")," "),e.xp6(3),e.Q6J("ngForOf",t.regions.nodes),e.xp6(5),e.Q6J("nzAction",r.root+"upload")("nzHeaders",e.VKq(75,he,"Bearer "+r.jwt))("nzBeforeUpload",r.beforeUpload)("nzShowUploadList",!1),e.xp6(1),e.Q6J("ngIf",!r.avatarUrl),e.xp6(1),e.Q6J("ngIf",r.avatarUrl),e.xp6(2),e.Q6J("nzDataSource",r.form.value.timeMultipliers),e.xp6(1),e.Q6J("ngForOf",r.form.value.timeMultipliers),e.xp6(4),e.Oqu(e.lcZ(97,45,"service.timeMultiplierTable.startTime")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(101,47,"service.timeMultiplierTable.startTime")),e.xp6(5),e.Oqu(e.lcZ(105,49,"service.timeMultiplierTable.endTime")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(109,51,"service.timeMultiplierTable.endTime")),e.xp6(5),e.Oqu(e.lcZ(113,53,"service.timeMultiplierTable.multiplyBy")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(117,55,"service.timeMultiplierTable.multiplyBy")),e.xp6(4),e.Oqu(e.lcZ(120,57,"service.insertRule")),e.xp6(3),e.Q6J("nzDataSource",r.form.value.distanceMultipliers),e.xp6(1),e.Q6J("ngForOf",r.form.value.distanceMultipliers),e.xp6(4),e.Oqu(e.lcZ(128,59,"service.distanceMultiplierTable.distanceFrom")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(132,61,"service.distanceMultiplierTable.distanceFrom")),e.xp6(5),e.Oqu(e.lcZ(136,63,"service.distanceMultiplierTable.distanceTo")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(140,65,"service.distanceMultiplierTable.distanceTo")),e.xp6(5),e.Oqu(e.lcZ(144,67,"service.timeMultiplierTable.multiplyBy")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(148,69,"service.timeMultiplierTable.multiplyBy")),e.xp6(4),e.Oqu(e.lcZ(151,71,"service.insertRule")),e.xp6(2),e.Q6J("disabled",r.form.invalid),e.xp6(1),e.Oqu(e.lcZ(154,73,"profile.submit"))}}let N=(()=>{class n{constructor(t,r,i,s,u,z,f){this.route=t,this.fb=r,this.updateGQL=i,this.createGQL=s,this.setRegionsGQL=u,this.msg=z,this.routerHelper=f,this.form=this.fb.group({id:[null],name:[null,l.kI.required],categoryId:[null,l.kI.required],baseFare:[0,l.kI.required],perHundredMeters:[0,l.kI.required],perMinuteDrive:[0,l.kI.required],prepayPercent:[0,l.kI.required],minimumFee:[0,l.kI.required],searchRadius:[0,l.kI.required],maximumDestinationDistance:[0,l.kI.required],paymentMethod:["CashCredit",l.kI.required],cancellationTotalFee:[0,l.kI.required],cancellationDriverShare:[0,l.kI.required],providerSharePercent:[0,l.kI.required],providerShareFlat:[0,l.kI.required],mediaId:[null,l.kI.required],timeMultipliers:[[]],distanceMultipliers:[[]],regions:[[]]}),this.root=ee.N.root,this.loadingUpload=!1,this.formatterPercent=c=>`${c} %`,this.parserPercent=c=>c.replace(" %",""),this.formatterMeters=c=>`${c} m`,this.parserMeters=c=>c.replace(" m",""),this.jwt=localStorage.getItem("beninfy_admin_token"),this.paymentMethods=Object.values(m.VU2),this.beforeUpload=(c,Ue)=>new te.y(A=>{var y;const G="image/jpeg"===c.type||"image/png"===c.type;if(!G)return this.msg.error("You can only upload JPG file!"),void A.complete();const H=(null!==(y=c.size)&&void 0!==y?y:0)/1024/1024<2;if(!H)return this.msg.error("Image must smaller than 2MB!"),void A.complete();A.next(G&&H),A.complete()})}ngOnInit(){this.query=this.route.data.pipe((0,U.U)(t=>t.service)),this.route.data.subscribe(t=>{null!=t.service.data.service&&(t.service.data.service.regions=t.service.data.service.regions.map(r=>r.id),this.form.patchValue(t.service.data.service),this.avatarUrl=t.service.data.service.media.address)})}onSubmit(){var t,r;return(0,_.mG)(this,void 0,void 0,function*(){const i=this.form.value,{id:s,regions:u}=i,z=(0,_._T)(i,["id","regions"]);if(u.length<1)return void this.msg.error("Select at least one region which this service can be ordered from.");let f=s;try{f=null==s?null===(t=(yield(0,v.z)(this.createGQL.mutate({input:z}))).data)||void 0===t?void 0:t.createOneService.id:null===(r=(yield(0,v.z)(this.updateGQL.mutate({id:s,input:z}))).data)||void 0===r?void 0:r.updateOneService.id,yield(0,v.z)(this.setRegionsGQL.mutate({id:f,relationIds:u})),this.routerHelper.goToParent(this.route)}catch(c){this.msg.error(c.message)}})}insertTimeRule(){null==this.form.value.timeMultipliers&&(this.form.value.timeMultipliers=[]),this.form.value.timeMultipliers.push({startTime:this.timeStartPicker.inputRef.nativeElement.value,endTime:this.timeEndPicker.inputRef.nativeElement.value,multiply:parseFloat(this.timeMultiplyInput.inputElement.nativeElement.value)})}removeTimeRule(t){this.form.value.timeMultipliers=this.form.value.timeMultipliers.filter(r=>r!=t)}insertDistanceRule(){null==this.form.value.distanceMultipliers&&(this.form.value.distanceMultipliers=[]),this.form.value.distanceMultipliers.push({distanceFrom:parseInt(this.distanceFromInput.inputElement.nativeElement.value),distanceTo:parseInt(this.distanceToInput.inputElement.nativeElement.value),multiply:parseFloat(this.distanceMultiplyInput.inputElement.nativeElement.value)})}removeDistanceRule(t){const r=this.form.value.distanceMultipliers.filter(i=>i!=t);this.form.patchValue({distanceMultipliers:r})}handleRegionCheckChange(t,r){t?this.form.value.regions.indexOf(r.id)<0&&this.form.value.regions.push(r.id):this.form.value.regions=this.form.value.regions.filter(i=>i==r.id)}handleUploadChange(t){switch(t.file.status){case"uploading":this.loadingUpload=!0;break;case"done":this.loadingUpload=!1,this.form.patchValue({mediaId:t.file.response.id}),this.avatarUrl=t.file.response.address;break;case"error":this.msg.error("Network error"),this.loadingUpload=!1}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.gz),e.Y36(l.qu),e.Y36(m.cv),e.Y36(m.wnc),e.Y36(m.OB9),e.Y36(w.dD),e.Y36(R.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-management-services-view"]],viewQuery:function(t,r){if(1&t&&(e.Gf(le,5),e.Gf(se,5),e.Gf(ce,5),e.Gf(me,5),e.Gf(ue,5),e.Gf(de,5)),2&t){let i;e.iGM(i=e.CRH())&&(r.timeStartPicker=i.first),e.iGM(i=e.CRH())&&(r.timeEndPicker=i.first),e.iGM(i=e.CRH())&&(r.timeMultiplyInput=i.first),e.iGM(i=e.CRH())&&(r.distanceFromInput=i.first),e.iGM(i=e.CRH())&&(r.distanceToInput=i.first),e.iGM(i=e.CRH())&&(r.distanceMultiplyInput=i.first)}},decls:2,vars:3,consts:[[4,"ngIf"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],["type","hidden","hidden","","formControlName","id"],["type","hidden","hidden","","formControlName","regions"],[1,"lg:grid","lg:grid-cols-4","lg:gap-2"],["nzFor","name","nzRequired",""],["nz-input","","formControlName","name","id","name"],["nzFor","categoryId","nzRequired",""],["formControlName","categoryId","id","categoryId"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","baseFare","nzRequired",""],["formControlName","baseFare","id","baseFare","nzRequired",""],["nzRequired",""],["formControlName","perHundredMeters","id","perHundredMeters","nzRequired",""],["formControlName","perMinuteDrive","id","perMinuteDrive","nzRequired",""],["formControlName","prepayPercent","id","prepayPercent","nzRequired","",3,"nzFormatter","nzParser","nzMax","nzMin"],["formControlName","minimumFee","id","minimumFee","nzRequired",""],["formControlName","maximumDestinationDistance","id","maximumDestinationDistance","nzRequired","",3,"nzFormatter","nzParser"],["formControlName","searchRadius","id","searchRadius","nzRequired","",3,"nzFormatter","nzParser"],["formControlName","paymentMethod","id","paymentMethod"],["nzFor","providerSharePercent","nzRequired",""],["formControlName","providerSharePercent","id","providerSharePercent","nzRequired","",3,"nzFormatter","nzParser","nzMax","nzMin"],["nzFor","providerShareFlat","nzRequired",""],["formControlName","providerShareFlat","id","providerShareFlat","nzRequired",""],["nzFor","cancellationTotalFee","nzRequired",""],["formControlName","cancellationTotalFee","id","cancellationTotalFee","nzRequired",""],["nzFor","cancellationDriverShare","nzRequired",""],["formControlName","cancellationDriverShare","id","cancellationDriverShare","nzRequired",""],[1,"lg:col-span-4"],["nzMode","checkable",3,"nzChecked","nzCheckedChange",4,"ngFor","ngForOf"],["nzListType","picture-card",3,"nzAction","nzHeaders","nzBeforeUpload","nzShowUploadList","nzChange"],["style","width: 100%",3,"src",4,"ngIf"],["nzTitle","Time Multiplier",1,"lg:col-span-4"],["nz-list","","nzBordered","",3,"nzDataSource"],["nz-list-item","",4,"ngFor","ngForOf"],[1,"md:grid","md:grid-cols-3","md:gap-2","mt-2"],["nzFormat","HH:mm",3,"nzPlaceHolder"],["timeStartPicker",""],["timeEndPicker",""],[3,"nzPlaceHolder"],["timeMultiplyInput",""],["nz-button","","type","button","nzType","primary",1,"float-right",3,"click"],["nzTitle","Distance Multiplier",1,"lg:col-span-4"],["distanceFromInput",""],["distanceToInput",""],["distanceMultiplyInput",""],["nz-button","","nzType","primary","type","submit",1,"float-right","mt-2",3,"disabled"],[3,"nzValue","nzLabel"],["nzMode","checkable",3,"nzChecked","nzCheckedChange"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"ant-upload-text"],[2,"width","100%",3,"src"],["nz-list-item",""],["nz-typography",""],["nz-list-item-actions",""],[3,"click"]],template:function(t,r){if(1&t&&(e.YNc(0,Te,155,77,"nz-card",0),e.ALo(1,"async")),2&t){let i;e.Q6J("ngIf",null==(i=e.lcZ(1,1,r.query))?null:i.data)}},directives:[p.O5,q.bd,l._Y,l.JL,g.Lr,l.sg,l.Fj,l.JJ,l.u,h.SK,g.Nx,h.t3,g.iK,g.Fd,J.Zp,Q.Vq,p.sg,ne._,re.FY,T.n_,ie.m4,M.ix,C.dQ,x.w,Q.Ip,oe.j,ae.Ls,T.AA,T.nk,T.KC],pipes:[p.Ov,I.X$],styles:["nz-input-number[_ngcontent-%COMP%]{width:100%}","nz-time-picker[_ngcontent-%COMP%]{width:100%}"]}),n})();var Ae=a(1740);function qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"nz-card",7),e.TgZ(1,"div"),e.TgZ(2,"p",8),e._uU(3,"Delete Category"),e.qZA(),e.TgZ(4,"p",9),e._uU(5,"Be careful with this action. It is irreversible."),e.qZA(),e.TgZ(6,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteCategory()}),e._uU(7,"Detete"),e.qZA(),e.qZA(),e.qZA()}}let O=(()=>{class n{constructor(t,r,i,s,u,z,f){this.route=t,this.updateGQL=r,this.createGQL=i,this.deleteGQL=s,this.fb=u,this.routerHelper=z,this.msg=f,this.form=this.fb.group({id:[null],name:[null,l.kI.required]})}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.subscription=this.route.data.subscribe(t=>null!=t.serviceCategory?this.form.patchValue(t.serviceCategory.data.serviceCategory):null)}onSubmit(){return(0,_.mG)(this,void 0,void 0,function*(){const t=this.form.value,{id:r}=t,i=(0,_._T)(t,["id"]);null==r?yield(0,v.z)(this.createGQL.mutate({input:i})):yield(0,v.z)(this.updateGQL.mutate({id:r,input:i})),this.routerHelper.goToParent(this.route)})}deleteCategory(){return(0,_.mG)(this,void 0,void 0,function*(){const t=this.form.value.id;try{yield(0,v.z)(this.deleteGQL.mutate({id:t})),this.routerHelper.goToParent(this.route),this.msg.success("Deleted!")}catch(r){this.msg.error(r.message)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.gz),e.Y36(m.VJo),e.Y36(m.REG),e.Y36(m.aEb),e.Y36(l.qu),e.Y36(R.b),e.Y36(w.dD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-management-service-category-view"]],decls:11,vars:4,consts:[["nzBackIcon","","nzTitle","Service Category","nzSubtitle","Input service category details below.",3,"nzGhost"],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","name"],["nzErrorTip","The input is not valid Name"],["nz-input","","formControlName","name","id","name"],["nz-button","","nzType","primary",1,"float-right",3,"disabled"],["class","mt-2","nzTitle","Dangerous Area",4,"ngIf"],["nzTitle","Dangerous Area",1,"mt-2"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2","max-w-xl","text-sm","text-gray-500"],["nz-button","","nzDanger","",1,"mt-2",3,"click"]],template:function(t,r){1&t&&(e._UZ(0,"nz-page-header",0),e.TgZ(1,"nz-card"),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"nz-form-item"),e.TgZ(4,"nz-form-label",2),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"nz-form-control",3),e._UZ(7,"input",4),e.qZA(),e.qZA(),e.TgZ(8,"button",5),e._uU(9,"Save"),e.qZA(),e.qZA(),e.qZA(),e.YNc(10,qe,8,0,"nz-card",6)),2&t&&(e.Q6J("nzGhost",!1),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("disabled",r.form.invalid),e.xp6(2),e.Q6J("ngIf",null!==(null==r.form.value?null:r.form.value.id)))},directives:[Ae.$O,q.bd,l._Y,l.JL,g.Lr,l.sg,h.SK,g.Nx,h.t3,g.iK,g.Fd,J.Zp,l.Fj,l.JJ,l.u,M.ix,C.dQ,x.w,p.O5],encapsulation:2}),n})();var Me=a(9827);let P=(()=>{class n{constructor(t,r){this.paging=t,this.gql=r}resolve(t,r){return this.gql.fetch()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Me.w),e.LFG(m.JQL))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),V=(()=>{class n{constructor(t){this.gql=t}resolve(t,r){return this.gql.fetch({id:t.params.id})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.YM8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),k=(()=>{class n{constructor(t){this.gql=t}resolve(t,r){return this.gql.fetch({id:t.params.id})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.hW4))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Y=(()=>{class n{constructor(t){this.gql=t}resolve(t,r){return this.gql.fetch()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.Nh5))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const Ce=[{path:"",component:W,resolve:{services:P},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",component:N,resolve:{service:V}},{path:"new",component:N,resolve:{service:Y}},{path:"category/view/:id",component:O,resolve:{serviceCategory:k}},{path:"category/new",component:O}];let xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[P,V,Y,k],imports:[[d.Bz.forChild(Ce)],d.Bz]}),n})();var ye=a(4534);let be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[S.k],imports:[[xe,ye.m]]}),n})()}}]);