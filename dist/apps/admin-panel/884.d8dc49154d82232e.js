"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[884],{5884:(H,f,e)=>{e.r(f),e.d(f,{CouponsModule:()=>j});var m=e(9808),u=e(9826),I=e(3266),Q=e(4004),n=e(5e3),T=e(9827),d=e(1740),A=e(4138),C=e(5540),q=e(7036),S=e(9997),l=e(7336),G=e(6771),h=e(1062);function N(t,s){if(1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",6),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.ALo(9,"date"),n.ALo(10,"date"),n.qZA(),n.TgZ(11,"td",6),n.TgZ(12,"nz-tag",9),n._uU(13),n.ALo(14,"translate"),n.ALo(15,"translate"),n.qZA(),n.qZA(),n.TgZ(16,"td"),n.TgZ(17,"a",10),n._uU(18),n.ALo(19,"translate"),n.qZA(),n.qZA(),n.qZA()),2&t){const o=s.$implicit,r=n.oxw(2);n.xp6(2),n.Oqu(o.title),n.xp6(2),n.Oqu(o.description),n.xp6(2),n.Oqu(o.code),n.xp6(2),n.AsE("",n.xi3(9,9,o.startAt,"mediumDate")," - ",n.xi3(10,12,o.expireAt,"mediumDate"),""),n.xp6(4),n.Q6J("nzColor",r.tagColor.boolean(o.isEnabled)),n.xp6(1),n.Oqu(o.isEnabled?n.lcZ(14,15,"profile.enabled"):n.lcZ(15,17,"profile.disabled")),n.xp6(4),n.Q6J("routerLink","../view/"+o.id),n.xp6(1),n.Oqu(n.lcZ(19,19,"profile.view"))}}const R=function(){return[]};function P(t,s){if(1&t){const o=n.EpF();n.TgZ(0,"nz-table",4,5),n.NdJ("nzQueryParams",function(a){return n.CHM(o),n.oxw().tableService.onTableQueryParamsChange(a)}),n.TgZ(2,"thead"),n.TgZ(3,"tr"),n.TgZ(4,"th"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"th",6),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"th"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"th"),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.TgZ(16,"th",7),n._uU(17),n.ALo(18,"translate"),n.qZA(),n.TgZ(19,"th"),n._uU(20),n.ALo(21,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(22,"tbody"),n.YNc(23,N,20,21,"tr",8),n.qZA(),n.qZA()}if(2&t){const o=s.ngIf,r=n.MAs(1);let a;n.Q6J("nzFrontPagination",!1)("nzData",null!==(a=o.nodes)&&void 0!==a?a:n.DdM(22,R))("nzTotal",o.totalCount),n.xp6(5),n.Oqu(n.lcZ(6,10,"profile.title")),n.xp6(3),n.Oqu(n.lcZ(9,12,"profile.description")),n.xp6(3),n.Oqu(n.lcZ(12,14,"profile.code")),n.xp6(3),n.Oqu(n.lcZ(15,16,"profile.dateTime")),n.xp6(3),n.Oqu(n.lcZ(18,18,"profile.status")),n.xp6(3),n.Oqu(n.lcZ(21,20,"profile.actions")),n.xp6(3),n.Q6J("ngForOf",r.data)}}let J=(()=>{class t{constructor(o,r,a){this.route=o,this.tableService=r,this.tagColor=a}ngOnInit(){this.query=this.route.data.pipe((0,Q.U)(o=>o.coupons))}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(u.gz),n.Y36(T.w),n.Y36(I.k))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-coupons-list"]],decls:9,vars:7,consts:[["nzBackIcon","","nzTitle","Coupons","nzSubtitle","List of all the coupons",3,"nzGhost"],["nz-button","","nzType","primary","routerLink","new"],["nz-icon","","nzType","plus"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams"],["table",""],[1,"hidden","lg:table-cell"],["nzShowSort","","nzColumnKey","isEnabled",1,"hidden","lg:table-cell"],[4,"ngFor","ngForOf"],[3,"nzColor"],[3,"routerLink"]],template:function(o,r){if(1&o&&(n.TgZ(0,"nz-page-header",0),n.TgZ(1,"nz-page-header-extra"),n.TgZ(2,"button",1),n._UZ(3,"i",2),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.qZA(),n.TgZ(6,"nz-page-header-content"),n.YNc(7,P,24,23,"nz-table",3),n.ALo(8,"async"),n.qZA(),n.qZA()),2&o){let a;n.Q6J("nzGhost",!1),n.xp6(4),n.Oqu(n.lcZ(5,3,"profile.add")),n.xp6(3),n.Q6J("ngIf",null==(a=n.lcZ(8,5,r.query))||null==a.data?null:a.data.coupons)}},directives:[d.$O,d.Jp,A.ix,C.dQ,q.w,u.rH,S.Ls,d.u5,m.O5,l.N8,l.Om,l.$Z,l.Uo,l._C,l.qD,l.p0,m.sg,G.j,u.yS],pipes:[h.X$,m.Ov,m.uU],encapsulation:2}),t})();var v=e(655),i=e(3075),c=e(7157),U=e(3905),Y=e(1731),D=e(8900),M=e(1646),p=e(3714),b=e(9095),V=e(8177),_=e(8763),y=e(1235),B=e(8809);let x=(()=>{class t{constructor(o,r,a,Z,z,g){this.route=o,this.message=r,this.fb=a,this.routerHelper=Z,this.createGQL=z,this.updateGQL=g,this.form=this.fb.group({id:[null],code:[null,i.kI.required],title:[null,i.kI.required],description:[null,i.kI.required],manyUsersCanUse:[0,i.kI.required],manyTimesUserCanUse:[0,i.kI.required],minimumCost:[0,i.kI.required],maximumCost:[0,i.kI.required],dates:[null],discountPercent:[0,i.kI.required],discountFlat:[0,i.kI.required],creditGift:[0,i.kI.required],isEnabled:[!0,i.kI.required],isFirstTravelOnly:[!1,i.kI.required]})}ngOnInit(){this.route.data.subscribe(o=>null!=o.coupon?this.form.patchValue(o.coupon.data.coupon):null)}onSubmit(){return(0,v.mG)(this,void 0,void 0,function*(){const o=this.form.value,{id:r,dates:a}=o,Z=(0,v._T)(o,["id","dates"]),z=a[0].getTime(),g=a[1].getTime(),O=Object.assign(Object.assign({},Z),{startAt:z,expireAt:g});null==r?yield(0,U.z)(this.createGQL.mutate({input:O})):yield(0,U.z)(this.updateGQL.mutate({id:r,input:O})),this.routerHelper.goToParent(this.route)})}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(u.gz),n.Y36(Y.dD),n.Y36(i.qu),n.Y36(D.b),n.Y36(c.KW0),n.Y36(c.Ue1))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-coupon-view"]],decls:73,vars:9,consts:[["nzBackIcon","","nzTitle","Coupon","nzSubtitle","Definitions of coupons.",3,"nzGhost"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],["formControlName","id","type","hidden","hidden",""],[1,"lg:grid","lg:grid-cols-4","lg:gap-2"],["nzRequired","","nzFor","title"],["nz-input","","formControlName","title","id","title"],["nzRequired","","nzFor","code"],["nz-input","","formControlName","code","id","code"],["nzRequired","","nzFor","description"],["nz-input","","formControlName","description","id","description"],["nzRequired","","nzFor","manyUsersCanUse"],["formControlName","manyUsersCanUse","id","manyUsersCanUse"],["nzRequired","","nzFor","manyTimesUserCanUse"],["formControlName","manyTimesUserCanUse","id","manyTimesUserCanUse"],["nzRequired","","nzFor","minimumCost"],["formControlName","minimumCost","id","minimumCost"],["nzRequired","","nzFor","maximumCost"],["formControlName","maximumCost","id","maximumCost"],["formControlName","dates",1,"w-full"],["nzRequired","","nzFor","discountPercent"],["formControlName","discountPercent","id","discountPercent"],["nzRequired","","nzFor","discountFlat"],["formControlName","discountFlat","id","discountFlat"],["nzRequired","","nzFor","creditGift"],["formControlName","creditGift","id","creditGift"],["nz-checkbox","","formControlName","isEnabled"],["nz-checkbox","","formControlName","isFirstTravelOnly"],["nz-button","","nzType","primary","type","submit",1,"float-right",3,"disabled"]],template:function(o,r){1&o&&(n._UZ(0,"nz-page-header",0),n.TgZ(1,"nz-card"),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return r.onSubmit()}),n._UZ(3,"input",2),n.TgZ(4,"div",3),n.TgZ(5,"nz-form-item"),n.TgZ(6,"nz-form-label",4),n._uU(7,"Title"),n.qZA(),n.TgZ(8,"nz-form-control"),n._UZ(9,"input",5),n.qZA(),n.qZA(),n.TgZ(10,"nz-form-item"),n.TgZ(11,"nz-form-label",6),n._uU(12,"Code"),n.qZA(),n.TgZ(13,"nz-form-control"),n._UZ(14,"input",7),n.qZA(),n.qZA(),n.TgZ(15,"nz-form-item"),n.TgZ(16,"nz-form-label",8),n._uU(17,"Description"),n.qZA(),n.TgZ(18,"nz-form-control"),n._UZ(19,"input",9),n.qZA(),n.qZA(),n.TgZ(20,"nz-form-item"),n.TgZ(21,"nz-form-label",10),n._uU(22,"# Users can use"),n.qZA(),n.TgZ(23,"nz-form-control"),n._UZ(24,"nz-input-number",11),n.qZA(),n.qZA(),n.TgZ(25,"nz-form-item"),n.TgZ(26,"nz-form-label",12),n._uU(27,"# Times User Can Use"),n.qZA(),n.TgZ(28,"nz-form-control"),n._UZ(29,"nz-input-number",13),n.qZA(),n.qZA(),n.TgZ(30,"nz-form-item"),n.TgZ(31,"nz-form-label",14),n._uU(32,"Minimum Cost"),n.qZA(),n.TgZ(33,"nz-form-control"),n._UZ(34,"nz-input-number",15),n.qZA(),n.qZA(),n.TgZ(35,"nz-form-item"),n.TgZ(36,"nz-form-label",16),n._uU(37,"Maximum Cost"),n.qZA(),n.TgZ(38,"nz-form-control"),n._UZ(39,"nz-input-number",17),n.qZA(),n.qZA(),n.TgZ(40,"nz-form-item"),n.TgZ(41,"nz-form-label"),n._uU(42),n.ALo(43,"translate"),n.qZA(),n.TgZ(44,"nz-form-control"),n._UZ(45,"nz-range-picker",18),n.qZA(),n.qZA(),n.TgZ(46,"nz-form-item"),n.TgZ(47,"nz-form-label",19),n._uU(48,"Discount Percent"),n.qZA(),n.TgZ(49,"nz-form-control"),n._UZ(50,"nz-input-number",20),n.qZA(),n.qZA(),n.TgZ(51,"nz-form-item"),n.TgZ(52,"nz-form-label",21),n._uU(53,"Discount Flat"),n.qZA(),n.TgZ(54,"nz-form-control"),n._UZ(55,"nz-input-number",22),n.qZA(),n.qZA(),n.TgZ(56,"nz-form-item"),n.TgZ(57,"nz-form-label",23),n._uU(58,"Credit Gift"),n.qZA(),n.TgZ(59,"nz-form-control"),n._UZ(60,"nz-input-number",24),n.qZA(),n.qZA(),n.TgZ(61,"nz-form-item"),n._UZ(62,"nz-form-label"),n.TgZ(63,"nz-form-control"),n.TgZ(64,"label",25),n._uU(65,"Is Enabled?"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(66,"nz-form-item"),n.TgZ(67,"nz-form-control"),n.TgZ(68,"label",26),n._uU(69,"Is First Travel Only?"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(70,"button",27),n._uU(71),n.ALo(72,"translate"),n.qZA(),n.qZA(),n.qZA()),2&o&&(n.Q6J("nzGhost",!1),n.xp6(2),n.Q6J("formGroup",r.form),n.xp6(40),n.Oqu(n.lcZ(43,5,"coupons.availabilityTime")),n.xp6(28),n.Q6J("disabled",r.form.invalid),n.xp6(1),n.Oqu(n.lcZ(72,7,"profile.submit")))},directives:[d.$O,M.bd,i._Y,i.JL,p.Lr,i.sg,i.Fj,i.JJ,i.u,b.SK,p.Nx,b.t3,p.iK,p.Fd,V.Zp,_._,y.uw,y.wS,B.Ie,A.ix,C.dQ,q.w],pipes:[h.X$],styles:["nz-input-number[_ngcontent-%COMP%]{width:100%}"]}),t})(),L=(()=>{class t{constructor(o,r){this.paging=o,this.gql=r}resolve(o,r){const a=this.paging.deserializeQueryParams(o.queryParams);return this.gql.fetch(a)}}return t.\u0275fac=function(o){return new(o||t)(n.LFG(T.w),n.LFG(c.YS$))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})(),F=(()=>{class t{constructor(o){this.gql=o}resolve(o,r){return this.gql.fetch({id:o.params.id})}}return t.\u0275fac=function(o){return new(o||t)(n.LFG(c.Dog))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})();const E=[{path:"",component:J,resolve:{coupons:L},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",component:x,resolve:{coupon:F}},{path:"new",component:x}];let w=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[L,F],imports:[[u.Bz.forChild(E)],u.Bz]}),t})();var $=e(4534);let j=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[m.ez,w,$.m]]}),t})()}}]);