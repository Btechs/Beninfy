"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[293],{9293:(D,f,o)=>{o.r(f),o.d(f,{AnnouncementsModule:()=>N});var F=o(4534),u=o(9826),A=o(655),s=o(3075),c=o(7157),z=o(3905),n=o(5e3),Q=o(8900),J=o(1646),m=o(3714),h=o(9095),S=o(8177),v=o(1235),T=o(4138),L=o(5540),y=o(7036),q=o(1062);let x=(()=>{class e{constructor(t,r,i,p,Z){this.route=t,this.routerHelper=r,this.createGQL=i,this.updateGQL=p,this.fb=Z,this.form=this.fb.group({id:[null],title:[null,s.kI.required],description:[null,s.kI.required],dates:[null,s.kI.required]})}ngOnInit(){this.subscription=this.route.data.subscribe(t=>this.form.patchValue(t.announcement.data.announcement))}onSubmit(){return(0,A.mG)(this,void 0,void 0,function*(){const t=this.form.value,{id:r,dates:i}=t,p=(0,A._T)(t,["id","dates"]),Z=i[0].getTime(),B=i[1].getTime(),U=Object.assign(Object.assign({},p),{startAt:Z,expireAt:B});null==r?yield(0,z.z)(this.createGQL.mutate({input:U})):yield(0,z.z)(this.updateGQL.mutate({id:r,input:U})),this.routerHelper.goToParent(this.route)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(u.gz),n.Y36(Q.b),n.Y36(c.MsJ),n.Y36(c.PHj),n.Y36(s.qu))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-announcement-view"]],decls:26,vars:11,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[1,"lg:grid","lg:grid-cols-3","lg:gap-2"],["nzRequired","","nzFor","title"],["nz-input","","formControlName","title","id","title"],["nzRequired","","nzFor","description"],["nz-input","","formControlName","description","id","description"],["formControlName","dates",1,"w-full"],["nz-button","","nzType","primary","type","submit",1,"float-right",3,"disabled"]],template:function(t,r){1&t&&(n.TgZ(0,"nz-card"),n.TgZ(1,"h3"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n._UZ(4,"br"),n.TgZ(5,"form",0),n.NdJ("ngSubmit",function(){return r.onSubmit()}),n.TgZ(6,"div",1),n.TgZ(7,"nz-form-item"),n.TgZ(8,"nz-form-label",2),n._uU(9,"Title"),n.qZA(),n.TgZ(10,"nz-form-control"),n._UZ(11,"input",3),n.qZA(),n.qZA(),n.TgZ(12,"nz-form-item"),n.TgZ(13,"nz-form-label",4),n._uU(14,"Description"),n.qZA(),n.TgZ(15,"nz-form-control"),n._UZ(16,"input",5),n.qZA(),n.qZA(),n.TgZ(17,"nz-form-item"),n.TgZ(18,"nz-form-label"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.TgZ(21,"nz-form-control"),n._UZ(22,"nz-range-picker",6),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"button",7),n._uU(24),n.ALo(25,"translate"),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(2),n.Oqu(n.lcZ(3,5,"coupons.availabilityTime")),n.xp6(3),n.Q6J("formGroup",r.form),n.xp6(14),n.Oqu(n.lcZ(20,7,"coupons.availabilityTime")),n.xp6(4),n.Q6J("disabled",r.form.invalid),n.xp6(1),n.Oqu(n.lcZ(25,9,"profile.submit")))},directives:[J.bd,s._Y,s.JL,m.Lr,s.sg,h.SK,m.Nx,h.t3,m.iK,m.Fd,S.Zp,s.Fj,s.JJ,s.u,v.uw,v.wS,T.ix,L.dQ,y.w],pipes:[q.X$],encapsulation:2}),e})(),C=(()=>{class e{constructor(t){this.gql=t}resolve(t,r){return this.gql.fetch({id:t.params.id})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(c.w$I))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var G=o(4004),b=o(9827),g=o(1740),P=o(9997),d=o(9808),l=o(7336);function R(e,a){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.ALo(7,"date"),n.ALo(8,"date"),n.qZA(),n.TgZ(9,"td"),n.TgZ(10,"a",7),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.qZA(),n.qZA()),2&e){const t=a.$implicit;n.xp6(2),n.Oqu(t.title),n.xp6(2),n.Oqu(t.description),n.xp6(2),n.AsE("",n.xi3(7,6,t.startAt,"mediumDate")," - ",n.xi3(8,9,t.expireAt,"mediumDate"),""),n.xp6(4),n.Q6J("routerLink","../view/"+t.id),n.xp6(1),n.Oqu(n.lcZ(12,12,"profile.view"))}}const Y=function(){return[]};function M(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"nz-table",4,5),n.NdJ("nzQueryParams",function(i){return n.CHM(t),n.oxw().tableService.onTableQueryParamsChange(i)}),n.TgZ(2,"thead"),n.TgZ(3,"tr"),n.TgZ(4,"th"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"th"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"th"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"th"),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"tbody"),n.YNc(17,R,13,14,"tr",6),n.qZA(),n.qZA()}if(2&e){const t=a.ngIf,r=n.MAs(1);let i;n.Q6J("nzFrontPagination",!1)("nzData",null!==(i=t.nodes)&&void 0!==i?i:n.DdM(16,Y))("nzTotal",t.totalCount),n.xp6(5),n.Oqu(n.lcZ(6,8,"profile.title")),n.xp6(3),n.Oqu(n.lcZ(9,10,"profile.description")),n.xp6(3),n.Oqu(n.lcZ(12,12,"profile.dateTime")),n.xp6(3),n.Oqu(n.lcZ(15,14,"profile.actions")),n.xp6(3),n.Q6J("ngForOf",r.data)}}let w=(()=>{class e{constructor(t,r){this.tableService=t,this.route=r}ngOnInit(){this.query=this.route.data.pipe((0,G.U)(t=>t.announcements))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(b.w),n.Y36(u.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-announcement-list"]],decls:9,vars:7,consts:[["nzBackIcon","","nzTitle","Announcements","nzSubtitle","List of all the announcements",3,"nzGhost"],["nz-button","","nzType","primary","routerLink","new"],["nz-icon","","nzType","plus"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,r){if(1&t&&(n.TgZ(0,"nz-page-header",0),n.TgZ(1,"nz-page-header-extra"),n.TgZ(2,"button",1),n._UZ(3,"i",2),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.qZA(),n.TgZ(6,"nz-page-header-content"),n.YNc(7,M,18,17,"nz-table",3),n.ALo(8,"async"),n.qZA(),n.qZA()),2&t){let i;n.Q6J("nzGhost",!1),n.xp6(4),n.Oqu(n.lcZ(5,3,"profile.add")),n.xp6(3),n.Q6J("ngIf",null==(i=n.lcZ(8,5,r.query))||null==i.data?null:i.data.announcements)}},directives:[g.$O,g.Jp,T.ix,L.dQ,y.w,u.rH,P.Ls,g.u5,d.O5,l.N8,l.Om,l.$Z,l.Uo,l._C,l.p0,d.sg,u.yS],pipes:[q.X$,d.Ov,d.uU],encapsulation:2}),e})(),O=(()=>{class e{constructor(t,r){this.paging=t,this.gql=r}resolve(t,r){const i=this.paging.deserializeQueryParams(t.queryParams);return this.gql.fetch(i)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(b.w),n.LFG(c.R9J))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();const I=[{path:"",component:w,resolve:{announcements:O},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",component:x,resolve:{announcement:C}},{path:"new",component:x}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[O,C],imports:[[u.Bz.forChild(I)],u.Bz]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[V,F.m]]}),e})()}}]);